import{s as ct,f as ve,t as ft,q as Ne,e as he,j as le,g as _e,r as Z,o as tt,l as se,p as Pt,ae as Le,n as rt,R as k,F as Nt}from"./index-CtcFTY0g.js";var[qt,yt]=ct({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Bt,Ee]=ct({strict:!1,name:"FormControlContext"});function Mt(e){const{id:s,isRequired:t,isInvalid:l,isDisabled:i,isReadOnly:n,...f}=e,g=Z.useId(),b=s||`field-${g}`,A=`${b}-label`,_=`${b}-feedback`,v=`${b}-helptext`,[O,N]=Z.useState(!1),[S,te]=Z.useState(!1),[L,$]=Z.useState(!1),m=Z.useCallback((p={},U=null)=>({id:v,...p,ref:tt(U,Q=>{Q&&te(!0)})}),[v]),z=Z.useCallback((p={},U=null)=>({...p,ref:U,"data-focus":se(L),"data-disabled":se(i),"data-invalid":se(l),"data-readonly":se(n),id:p.id!==void 0?p.id:A,htmlFor:p.htmlFor!==void 0?p.htmlFor:b}),[b,i,L,l,n,A]),K=Z.useCallback((p={},U=null)=>({id:_,...p,ref:tt(U,Q=>{Q&&N(!0)}),"aria-live":"polite"}),[_]),C=Z.useCallback((p={},U=null)=>({...p,...f,ref:U,role:"group","data-focus":se(L),"data-disabled":se(i),"data-invalid":se(l),"data-readonly":se(n)}),[f,i,L,l,n]),re=Z.useCallback((p={},U=null)=>({...p,ref:U,role:"presentation","aria-hidden":!0,children:p.children||"*"}),[]);return{isRequired:!!t,isInvalid:!!l,isReadOnly:!!n,isDisabled:!!i,isFocused:!!L,onFocus:()=>$(!0),onBlur:()=>$(!1),hasFeedbackText:O,setHasFeedbackText:N,hasHelpText:S,setHasHelpText:te,id:b,labelId:A,feedbackId:_,helpTextId:v,htmlProps:f,getHelpTextProps:m,getErrorMessageProps:K,getRootProps:C,getLabelProps:z,getRequiredIndicatorProps:re}}var Ht=ve(function(s,t){const l=ft("Form",s),i=Ne(s),{getRootProps:n,htmlProps:f,...g}=Mt(i),b=he("chakra-form-control",s.className);return le.jsx(Bt,{value:g,children:le.jsx(qt,{value:l,children:le.jsx(_e.div,{...n({},t),className:b,__css:l.container})})})});Ht.displayName="FormControl";var jt=ve(function(s,t){const l=Ee(),i=yt(),n=he("chakra-form__helper-text",s.className);return le.jsx(_e.div,{...l==null?void 0:l.getHelpTextProps(s,t),__css:i.helperText,className:n})});jt.displayName="FormHelperText";var Wt=ve(function(s,t){var l;const i=Pt("FormLabel",s),n=Ne(s),{className:f,children:g,requiredIndicator:b=le.jsx(gt,{}),optionalIndicator:A=null,..._}=n,v=Ee(),O=(l=v==null?void 0:v.getLabelProps(_,t))!=null?l:{ref:t,..._};return le.jsxs(_e.label,{...O,className:he("chakra-form__label",n.className),__css:{display:"block",textAlign:"start",...i},children:[g,v!=null&&v.isRequired?b:A]})});Wt.displayName="FormLabel";var gt=ve(function(s,t){const l=Ee(),i=yt();if(!(l!=null&&l.isRequired))return null;const n=he("chakra-form__required-indicator",s.className);return le.jsx(_e.span,{...l==null?void 0:l.getRequiredIndicatorProps(s,t),__css:i.requiredIndicator,className:n})});gt.displayName="RequiredIndicator";function $t(e){const{isDisabled:s,isInvalid:t,isReadOnly:l,isRequired:i,...n}=zt(e);return{...n,disabled:s,readOnly:l,required:i,"aria-invalid":Le(t),"aria-required":Le(i),"aria-readonly":Le(l)}}function zt(e){var s,t,l;const i=Ee(),{id:n,disabled:f,readOnly:g,required:b,isRequired:A,isInvalid:_,isReadOnly:v,isDisabled:O,onFocus:N,onBlur:S,...te}=e,L=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&L.push(i.feedbackId),i!=null&&i.hasHelpText&&L.push(i.helpTextId),{...te,"aria-describedby":L.join(" ")||void 0,id:n??(i==null?void 0:i.id),isDisabled:(s=f??O)!=null?s:i==null?void 0:i.isDisabled,isReadOnly:(t=g??v)!=null?t:i==null?void 0:i.isReadOnly,isRequired:(l=b??A)!=null?l:i==null?void 0:i.isRequired,isInvalid:_??(i==null?void 0:i.isInvalid),onFocus:rt(i==null?void 0:i.onFocus,N),onBlur:rt(i==null?void 0:i.onBlur,S)}}var vt=ve(function(s,t){const{htmlSize:l,...i}=s,n=ft("Input",i),f=Ne(i),g=$t(f),b=he("chakra-input",s.className);return le.jsx(_e.input,{size:l,...g,__css:n.field,ref:t,className:b})});vt.displayName="Input";vt.id="Input";var be=e=>e.type==="checkbox",oe=e=>e instanceof Date,q=e=>e==null;const ht=e=>typeof e=="object";var I=e=>!q(e)&&!Array.isArray(e)&&ht(e)&&!oe(e),_t=e=>I(e)&&e.target?be(e.target)?e.target.checked:e.target.value:e,Kt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bt=(e,s)=>e.has(Kt(s)),Gt=e=>{const s=e.constructor&&e.constructor.prototype;return I(s)&&s.hasOwnProperty("isPrototypeOf")},qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(qe&&(e instanceof Blob||e instanceof FileList))&&(t||I(e)))if(s=t?[]:{},!t&&!Gt(e))s=e;else for(const l in e)e.hasOwnProperty(l)&&(s[l]=B(e[l]));else return e;return s}var Fe=e=>Array.isArray(e)?e.filter(Boolean):[],w=e=>e===void 0,d=(e,s,t)=>{if(!s||!I(e))return t;const l=Fe(s.split(/[,[\].]+?/)).reduce((i,n)=>q(i)?i:i[n],e);return w(l)||l===e?w(e[s])?t:e[s]:l},X=e=>typeof e=="boolean",Be=e=>/^\w*$/.test(e),Ft=e=>Fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),D=(e,s,t)=>{let l=-1;const i=Be(s)?[s]:Ft(s),n=i.length,f=n-1;for(;++l<n;){const g=i[l];let b=t;if(l!==f){const A=e[g];b=I(A)||Array.isArray(A)?A:isNaN(+i[l+1])?{}:[]}if(g==="__proto__")return;e[g]=b,e=e[g]}return e};const De={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},J={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ee={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Jt=k.createContext(null),Me=()=>k.useContext(Jt);var mt=(e,s,t,l=!0)=>{const i={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(i,n,{get:()=>{const f=n;return s._proxyFormState[f]!==J.all&&(s._proxyFormState[f]=!l||J.all),t&&(t[f]=!0),e[f]}});return i},H=e=>I(e)&&!Object.keys(e).length,xt=(e,s,t,l)=>{t(e);const{name:i,...n}=e;return H(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(f=>s[f]===(!l||J.all))},Ve=e=>Array.isArray(e)?e:[e],Vt=(e,s,t)=>!e||!s||e===s||Ve(e).some(l=>l&&(t?l===s:l.startsWith(s)||s.startsWith(l)));function He(e){const s=k.useRef(e);s.current=e,k.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function Qt(e){const s=Me(),{control:t=s.control,disabled:l,name:i,exact:n}=e||{},[f,g]=k.useState(t._formState),b=k.useRef(!0),A=k.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),_=k.useRef(i);return _.current=i,He({disabled:l,next:v=>b.current&&Vt(_.current,v.name,n)&&xt(v,A.current,t._updateFormState)&&g({...t._formState,...v}),subject:t._subjects.state}),k.useEffect(()=>(b.current=!0,A.current.isValid&&t._updateValid(!0),()=>{b.current=!1}),[t]),mt(f,t,A.current,!1)}var Y=e=>typeof e=="string",At=(e,s,t,l,i)=>Y(e)?(l&&s.watch.add(e),d(t,e,i)):Array.isArray(e)?e.map(n=>(l&&s.watch.add(n),d(t,n))):(l&&(s.watchAll=!0),t);function Xt(e){const s=Me(),{control:t=s.control,name:l,defaultValue:i,disabled:n,exact:f}=e||{},g=k.useRef(l);g.current=l,He({disabled:n,subject:t._subjects.values,next:_=>{Vt(g.current,_.name,f)&&A(B(At(g.current,t._names,_.values||t._formValues,!1,i)))}});const[b,A]=k.useState(t._getWatch(l,i));return k.useEffect(()=>t._removeUnmounted()),b}function Yt(e){const s=Me(),{name:t,disabled:l,control:i=s.control,shouldUnregister:n}=e,f=bt(i._names.array,t),g=Xt({control:i,name:t,defaultValue:d(i._formValues,t,d(i._defaultValues,t,e.defaultValue)),exact:!0}),b=Qt({control:i,name:t}),A=k.useRef(i.register(t,{...e.rules,value:g,...X(e.disabled)?{disabled:e.disabled}:{}}));return k.useEffect(()=>{const _=i._options.shouldUnregister||n,v=(O,N)=>{const S=d(i._fields,O);S&&S._f&&(S._f.mount=N)};if(v(t,!0),_){const O=B(d(i._options.defaultValues,t));D(i._defaultValues,t,O),w(d(i._formValues,t))&&D(i._formValues,t,O)}return()=>{(f?_&&!i._state.action:_)?i.unregister(t):v(t,!1)}},[t,i,f,n]),k.useEffect(()=>{d(i._fields,t)&&i._updateDisabledField({disabled:l,fields:i._fields,name:t,value:d(i._fields,t)._f.value})},[l,t,i]),{field:{name:t,value:g,...X(l)||b.disabled?{disabled:b.disabled||l}:{},onChange:k.useCallback(_=>A.current.onChange({target:{value:_t(_),name:t},type:De.CHANGE}),[t]),onBlur:k.useCallback(()=>A.current.onBlur({target:{value:d(i._formValues,t),name:t},type:De.BLUR}),[t,i]),ref:_=>{const v=d(i._fields,t);v&&_&&(v._f.ref={focus:()=>_.focus(),select:()=>_.select(),setCustomValidity:O=>_.setCustomValidity(O),reportValidity:()=>_.reportValidity()})}},formState:b,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!d(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!d(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!d(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!d(b.validatingFields,t)},error:{enumerable:!0,get:()=>d(b.errors,t)}})}}const gr=e=>e.render(Yt(e));var Zt=(e,s,t,l,i)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[l]:i||!0}}:{},st=e=>({isOnSubmit:!e||e===J.onSubmit,isOnBlur:e===J.onBlur,isOnChange:e===J.onChange,isOnAll:e===J.all,isOnTouch:e===J.onTouched}),it=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length))));const ge=(e,s,t,l)=>{for(const i of t||Object.keys(e)){const n=d(e,i);if(n){const{_f:f,...g}=n;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],i)&&!l)break;if(f.ref&&s(f.ref,f.name)&&!l)break;ge(g,s)}else I(g)&&ge(g,s)}}};var er=(e,s,t)=>{const l=Fe(d(e,t));return D(l,"root",s[t]),D(e,t,l),e},je=e=>e.type==="file",ie=e=>typeof e=="function",ke=e=>{if(!qe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ae=e=>Y(e),We=e=>e.type==="radio",we=e=>e instanceof RegExp;const lt={value:!1,isValid:!1},at={value:!0,isValid:!0};var Dt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!w(e[0].attributes.value)?w(e[0].value)||e[0].value===""?at:{value:e[0].value,isValid:!0}:at:lt}return lt};const nt={isValid:!1,value:null};var kt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,nt):nt;function ut(e,s,t="validate"){if(Ae(e)||Array.isArray(e)&&e.every(Ae)||X(e)&&!e)return{type:t,message:Ae(e)?e:"",ref:s}}var ue=e=>I(e)&&!we(e)?e:{value:e,message:""},ot=async(e,s,t,l,i)=>{const{ref:n,refs:f,required:g,maxLength:b,minLength:A,min:_,max:v,pattern:O,validate:N,name:S,valueAsNumber:te,mount:L,disabled:$}=e._f,m=d(s,S);if(!L||$)return{};const z=f?f[0]:n,K=F=>{l&&z.reportValidity&&(z.setCustomValidity(X(F)?"":F||""),z.reportValidity())},C={},re=We(n),p=be(n),U=re||p,Q=(te||je(n))&&w(n.value)&&w(m)||ke(n)&&n.value===""||m===""||Array.isArray(m)&&!m.length,j=Zt.bind(null,S,t,C),me=(F,x,R,P=ee.maxLength,G=ee.minLength)=>{const W=F?x:R;C[S]={type:F?P:G,message:W,ref:n,...j(F?P:G,W)}};if(i?!Array.isArray(m)||!m.length:g&&(!U&&(Q||q(m))||X(m)&&!m||p&&!Dt(f).isValid||re&&!kt(f).isValid)){const{value:F,message:x}=Ae(g)?{value:!!g,message:g}:ue(g);if(F&&(C[S]={type:ee.required,message:x,ref:z,...j(ee.required,x)},!t))return K(x),C}if(!Q&&(!q(_)||!q(v))){let F,x;const R=ue(v),P=ue(_);if(!q(m)&&!isNaN(m)){const G=n.valueAsNumber||m&&+m;q(R.value)||(F=G>R.value),q(P.value)||(x=G<P.value)}else{const G=n.valueAsDate||new Date(m),W=fe=>new Date(new Date().toDateString()+" "+fe),de=n.type=="time",ce=n.type=="week";Y(R.value)&&m&&(F=de?W(m)>W(R.value):ce?m>R.value:G>new Date(R.value)),Y(P.value)&&m&&(x=de?W(m)<W(P.value):ce?m<P.value:G<new Date(P.value))}if((F||x)&&(me(!!F,R.message,P.message,ee.max,ee.min),!t))return K(C[S].message),C}if((b||A)&&!Q&&(Y(m)||i&&Array.isArray(m))){const F=ue(b),x=ue(A),R=!q(F.value)&&m.length>+F.value,P=!q(x.value)&&m.length<+x.value;if((R||P)&&(me(R,F.message,x.message),!t))return K(C[S].message),C}if(O&&!Q&&Y(m)){const{value:F,message:x}=ue(O);if(we(F)&&!m.match(F)&&(C[S]={type:ee.pattern,message:x,ref:n,...j(ee.pattern,x)},!t))return K(x),C}if(N){if(ie(N)){const F=await N(m,s),x=ut(F,z);if(x&&(C[S]={...x,...j(ee.validate,x.message)},!t))return K(x.message),C}else if(I(N)){let F={};for(const x in N){if(!H(F)&&!t)break;const R=ut(await N[x](m,s),z,x);R&&(F={...R,...j(x,R.message)},K(R.message),t&&(C[S]=F))}if(!H(F)&&(C[S]={ref:z,...F},!t))return C}}return K(!0),C};function tr(e,s){const t=s.slice(0,-1).length;let l=0;for(;l<t;)e=w(e)?l++:e[s[l++]];return e}function rr(e){for(const s in e)if(e.hasOwnProperty(s)&&!w(e[s]))return!1;return!0}function T(e,s){const t=Array.isArray(s)?s:Be(s)?[s]:Ft(s),l=t.length===1?e:tr(e,t),i=t.length-1,n=t[i];return l&&delete l[n],i!==0&&(I(l)&&H(l)||Array.isArray(l)&&rr(l))&&T(e,t.slice(0,-1)),e}var Oe=()=>{let e=[];return{get observers(){return e},next:i=>{for(const n of e)n.next&&n.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(n=>n!==i)}}),unsubscribe:()=>{e=[]}}},Se=e=>q(e)||!ht(e);function ae(e,s){if(Se(e)||Se(s))return e===s;if(oe(e)&&oe(s))return e.getTime()===s.getTime();const t=Object.keys(e),l=Object.keys(s);if(t.length!==l.length)return!1;for(const i of t){const n=e[i];if(!l.includes(i))return!1;if(i!=="ref"){const f=s[i];if(oe(n)&&oe(f)||I(n)&&I(f)||Array.isArray(n)&&Array.isArray(f)?!ae(n,f):n!==f)return!1}}return!0}var wt=e=>e.type==="select-multiple",sr=e=>We(e)||be(e),Ue=e=>ke(e)&&e.isConnected,St=e=>{for(const s in e)if(ie(e[s]))return!0;return!1};function Ce(e,s={}){const t=Array.isArray(e);if(I(e)||t)for(const l in e)Array.isArray(e[l])||I(e[l])&&!St(e[l])?(s[l]=Array.isArray(e[l])?[]:{},Ce(e[l],s[l])):q(e[l])||(s[l]=!0);return s}function Ct(e,s,t){const l=Array.isArray(e);if(I(e)||l)for(const i in e)Array.isArray(e[i])||I(e[i])&&!St(e[i])?w(s)||Se(t[i])?t[i]=Array.isArray(e[i])?Ce(e[i],[]):{...Ce(e[i])}:Ct(e[i],q(s)?{}:s[i],t[i]):t[i]=!ae(e[i],s[i]);return t}var xe=(e,s)=>Ct(e,s,Ce(s)),Et=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:l})=>w(e)?e:s?e===""?NaN:e&&+e:t&&Y(e)?new Date(e):l?l(e):e;function Pe(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return je(s)?s.files:We(s)?kt(e.refs).value:wt(s)?[...s.selectedOptions].map(({value:t})=>t):be(s)?Dt(e.refs).value:Et(w(s.value)?e.ref.value:s.value,e)}var ir=(e,s,t,l)=>{const i={};for(const n of e){const f=d(s,n);f&&D(i,n,f._f)}return{criteriaMode:t,names:[...e],fields:i,shouldUseNativeValidation:l}},ye=e=>w(e)?e:we(e)?e.source:I(e)?we(e.value)?e.value.source:e.value:e,lr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dt(e,s,t){const l=d(e,t);if(l||Be(t))return{error:l,name:t};const i=t.split(".");for(;i.length;){const n=i.join("."),f=d(s,n),g=d(e,n);if(f&&!Array.isArray(f)&&t!==n)return{name:t};if(g&&g.type)return{name:n,error:g};i.pop()}return{name:t}}var ar=(e,s,t,l,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(s||e):(t?l.isOnBlur:i.isOnBlur)?!e:(t?l.isOnChange:i.isOnChange)?e:!0,nr=(e,s)=>!Fe(d(e,s)).length&&T(e,s);const ur={mode:J.onSubmit,reValidateMode:J.onChange,shouldFocusError:!0};function or(e={}){let s={...ur,...e},t={submitCount:0,isDirty:!1,isLoading:ie(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},l={},i=I(s.defaultValues)||I(s.values)?B(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:B(i),f={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},b,A=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:Oe(),array:Oe(),state:Oe()},O=st(s.mode),N=st(s.reValidateMode),S=s.criteriaMode===J.all,te=r=>a=>{clearTimeout(A),A=setTimeout(r,a)},L=async r=>{if(_.isValid||r){const a=s.resolver?H((await U()).errors):await j(l,!0);a!==t.isValid&&v.state.next({isValid:a})}},$=(r,a)=>{(_.isValidating||_.validatingFields)&&((r||Array.from(g.mount)).forEach(u=>{u&&(a?D(t.validatingFields,u,a):T(t.validatingFields,u))}),v.state.next({validatingFields:t.validatingFields,isValidating:!H(t.validatingFields)}))},m=(r,a=[],u,y,c=!0,o=!0)=>{if(y&&u){if(f.action=!0,o&&Array.isArray(d(l,r))){const h=u(d(l,r),y.argA,y.argB);c&&D(l,r,h)}if(o&&Array.isArray(d(t.errors,r))){const h=u(d(t.errors,r),y.argA,y.argB);c&&D(t.errors,r,h),nr(t.errors,r)}if(_.touchedFields&&o&&Array.isArray(d(t.touchedFields,r))){const h=u(d(t.touchedFields,r),y.argA,y.argB);c&&D(t.touchedFields,r,h)}_.dirtyFields&&(t.dirtyFields=xe(i,n)),v.state.next({name:r,isDirty:F(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(n,r,a)},z=(r,a)=>{D(t.errors,r,a),v.state.next({errors:t.errors})},K=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},C=(r,a,u,y)=>{const c=d(l,r);if(c){const o=d(n,r,w(u)?d(i,r):u);w(o)||y&&y.defaultChecked||a?D(n,r,a?o:Pe(c._f)):P(r,o),f.mount&&L()}},re=(r,a,u,y,c)=>{let o=!1,h=!1;const V={name:r},E=!!(d(l,r)&&d(l,r)._f&&d(l,r)._f.disabled);if(!u||y){_.isDirty&&(h=t.isDirty,t.isDirty=V.isDirty=F(),o=h!==V.isDirty);const M=E||ae(d(i,r),a);h=!!(!E&&d(t.dirtyFields,r)),M||E?T(t.dirtyFields,r):D(t.dirtyFields,r,!0),V.dirtyFields=t.dirtyFields,o=o||_.dirtyFields&&h!==!M}if(u){const M=d(t.touchedFields,r);M||(D(t.touchedFields,r,u),V.touchedFields=t.touchedFields,o=o||_.touchedFields&&M!==u)}return o&&c&&v.state.next(V),o?V:{}},p=(r,a,u,y)=>{const c=d(t.errors,r),o=_.isValid&&X(a)&&t.isValid!==a;if(e.delayError&&u?(b=te(()=>z(r,u)),b(e.delayError)):(clearTimeout(A),b=null,u?D(t.errors,r,u):T(t.errors,r)),(u?!ae(c,u):c)||!H(y)||o){const h={...y,...o&&X(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...h},v.state.next(h)}},U=async r=>{$(r,!0);const a=await s.resolver(n,s.context,ir(r||g.mount,l,s.criteriaMode,s.shouldUseNativeValidation));return $(r),a},Q=async r=>{const{errors:a}=await U(r);if(r)for(const u of r){const y=d(a,u);y?D(t.errors,u,y):T(t.errors,u)}else t.errors=a;return a},j=async(r,a,u={valid:!0})=>{for(const y in r){const c=r[y];if(c){const{_f:o,...h}=c;if(o){const V=g.array.has(o.name);$([y],!0);const E=await ot(c,n,S,s.shouldUseNativeValidation&&!a,V);if($([y]),E[o.name]&&(u.valid=!1,a))break;!a&&(d(E,o.name)?V?er(t.errors,E,o.name):D(t.errors,o.name,E[o.name]):T(t.errors,o.name))}h&&await j(h,a,u)}}return u.valid},me=()=>{for(const r of g.unMount){const a=d(l,r);a&&(a._f.refs?a._f.refs.every(u=>!Ue(u)):!Ue(a._f.ref))&&pe(r)}g.unMount=new Set},F=(r,a)=>(r&&a&&D(n,r,a),!ae($e(),i)),x=(r,a,u)=>At(r,g,{...f.mount?n:w(a)?i:Y(r)?{[r]:a}:a},u,a),R=r=>Fe(d(f.mount?n:i,r,e.shouldUnregister?d(i,r,[]):[])),P=(r,a,u={})=>{const y=d(l,r);let c=a;if(y){const o=y._f;o&&(!o.disabled&&D(n,r,Et(a,o)),c=ke(o.ref)&&q(a)?"":a,wt(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?be(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(V=>V===h.value):c===h.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(h=>h.checked=h.value===c):je(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||v.values.next({name:r,values:{...n}})))}(u.shouldDirty||u.shouldTouch)&&re(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&fe(r)},G=(r,a,u)=>{for(const y in a){const c=a[y],o=`${r}.${y}`,h=d(l,o);(g.array.has(r)||!Se(c)||h&&!h._f)&&!oe(c)?G(o,c,u):P(o,c,u)}},W=(r,a,u={})=>{const y=d(l,r),c=g.array.has(r),o=B(a);D(n,r,o),c?(v.array.next({name:r,values:{...n}}),(_.isDirty||_.dirtyFields)&&u.shouldDirty&&v.state.next({name:r,dirtyFields:xe(i,n),isDirty:F(r,o)})):y&&!y._f&&!q(o)?G(r,o,u):P(r,o,u),it(r,g)&&v.state.next({...t}),v.values.next({name:f.mount?r:void 0,values:{...n}})},de=async r=>{f.mount=!0;const a=r.target;let u=a.name,y=!0;const c=d(l,u),o=()=>a.type?Pe(c._f):_t(r),h=V=>{y=Number.isNaN(V)||V===d(n,u,V)};if(c){let V,E;const M=o(),ne=r.type===De.BLUR||r.type===De.FOCUS_OUT,Lt=!lr(c._f)&&!s.resolver&&!d(t.errors,u)&&!c._f.deps||ar(ne,d(t.touchedFields,u),t.isSubmitted,N,O),Te=it(u,g,ne);D(n,u,M),ne?(c._f.onBlur&&c._f.onBlur(r),b&&b(0)):c._f.onChange&&c._f.onChange(r);const Ie=re(u,M,ne,!1),Ot=!H(Ie)||Te;if(!ne&&v.values.next({name:u,type:r.type,values:{...n}}),Lt)return _.isValid&&L(),Ot&&v.state.next({name:u,...Te?{}:Ie});if(!ne&&Te&&v.state.next({...t}),s.resolver){const{errors:Ze}=await U([u]);if(h(M),y){const Ut=dt(t.errors,l,u),et=dt(Ze,l,Ut.name||u);V=et.error,u=et.name,E=H(Ze)}}else $([u],!0),V=(await ot(c,n,S,s.shouldUseNativeValidation))[u],$([u]),h(M),y&&(V?E=!1:_.isValid&&(E=await j(l,!0)));y&&(c._f.deps&&fe(c._f.deps),p(u,E,V,Ie))}},ce=(r,a)=>{if(d(t.errors,a)&&r.focus)return r.focus(),1},fe=async(r,a={})=>{let u,y;const c=Ve(r);if(s.resolver){const o=await Q(w(r)?r:c);u=H(o),y=r?!c.some(h=>d(o,h)):u}else r?(y=(await Promise.all(c.map(async o=>{const h=d(l,o);return await j(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!y&&!t.isValid)&&L()):y=u=await j(l);return v.state.next({...!Y(r)||_.isValid&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!y&&ge(l,ce,r?c:g.mount),y},$e=r=>{const a={...f.mount?n:i};return w(r)?a:Y(r)?d(a,r):r.map(u=>d(a,u))},ze=(r,a)=>({invalid:!!d((a||t).errors,r),isDirty:!!d((a||t).dirtyFields,r),error:d((a||t).errors,r),isValidating:!!d(t.validatingFields,r),isTouched:!!d((a||t).touchedFields,r)}),pt=r=>{r&&Ve(r).forEach(a=>T(t.errors,a)),v.state.next({errors:r?t.errors:{}})},Ke=(r,a,u)=>{const y=(d(l,r,{_f:{}})._f||{}).ref,c=d(t.errors,r)||{},{ref:o,message:h,type:V,...E}=c;D(t.errors,r,{...E,...a,ref:y}),v.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&y&&y.focus&&y.focus()},Rt=(r,a)=>ie(r)?v.values.subscribe({next:u=>r(x(void 0,a),u)}):x(r,a,!0),pe=(r,a={})=>{for(const u of r?Ve(r):g.mount)g.mount.delete(u),g.array.delete(u),a.keepValue||(T(l,u),T(n,u)),!a.keepError&&T(t.errors,u),!a.keepDirty&&T(t.dirtyFields,u),!a.keepTouched&&T(t.touchedFields,u),!a.keepIsValidating&&T(t.validatingFields,u),!s.shouldUnregister&&!a.keepDefaultValue&&T(i,u);v.values.next({values:{...n}}),v.state.next({...t,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&L()},Ge=({disabled:r,name:a,field:u,fields:y,value:c})=>{if(X(r)&&f.mount||r){const o=r?void 0:w(c)?Pe(u?u._f:d(y,a)._f):c;D(n,a,o),re(a,o,!1,!1,!0)}},Re=(r,a={})=>{let u=d(l,r);const y=X(a.disabled);return D(l,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...a}}),g.mount.add(r),u?Ge({field:u,disabled:a.disabled,name:r,value:a.value}):C(r,!0,a.value),{...y?{disabled:a.disabled}:{},...s.progressive?{required:!!a.required,min:ye(a.min),max:ye(a.max),minLength:ye(a.minLength),maxLength:ye(a.maxLength),pattern:ye(a.pattern)}:{},name:r,onChange:de,onBlur:de,ref:c=>{if(c){Re(r,a),u=d(l,r);const o=w(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=sr(o),V=u._f.refs||[];if(h?V.find(E=>E===o):o===u._f.ref)return;D(l,r,{_f:{...u._f,...h?{refs:[...V.filter(Ue),o,...Array.isArray(d(i,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),C(r,!1,void 0,o)}else u=d(l,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(bt(g.array,r)&&f.action)&&g.unMount.add(r)}}},Je=()=>s.shouldFocusError&&ge(l,ce,g.mount),Tt=r=>{X(r)&&(v.state.next({disabled:r}),ge(l,(a,u)=>{const y=d(l,u);y&&(a.disabled=y._f.disabled||r,Array.isArray(y._f.refs)&&y._f.refs.forEach(c=>{c.disabled=y._f.disabled||r}))},0,!1))},Qe=(r,a)=>async u=>{let y;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=B(n);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:h}=await U();t.errors=o,c=h}else await j(l);if(T(t.errors,"root"),H(t.errors)){v.state.next({errors:{}});try{await r(c,u)}catch(o){y=o}}else a&&await a({...t.errors},u),Je(),setTimeout(Je);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:H(t.errors)&&!y,submitCount:t.submitCount+1,errors:t.errors}),y)throw y},It=(r,a={})=>{d(l,r)&&(w(a.defaultValue)?W(r,B(d(i,r))):(W(r,a.defaultValue),D(i,r,B(a.defaultValue))),a.keepTouched||T(t.touchedFields,r),a.keepDirty||(T(t.dirtyFields,r),t.isDirty=a.defaultValue?F(r,B(d(i,r))):F()),a.keepError||(T(t.errors,r),_.isValid&&L()),v.state.next({...t}))},Xe=(r,a={})=>{const u=r?B(r):i,y=B(u),c=H(r),o=c?i:y;if(a.keepDefaultValues||(i=u),!a.keepValues){if(a.keepDirtyValues)for(const h of g.mount)d(t.dirtyFields,h)?D(o,h,d(n,h)):W(h,d(o,h));else{if(qe&&w(r))for(const h of g.mount){const V=d(l,h);if(V&&V._f){const E=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(ke(E)){const M=E.closest("form");if(M){M.reset();break}}}}l={}}n=e.shouldUnregister?a.keepDefaultValues?B(i):{}:B(o),v.array.next({values:{...o}}),v.values.next({values:{...o}})}g={mount:a.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues,f.watch=!!e.shouldUnregister,v.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:c?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ae(r,i)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?[]:a.keepDirtyValues?a.keepDefaultValues&&n?xe(i,n):t.dirtyFields:a.keepDefaultValues&&r?xe(i,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ye=(r,a)=>Xe(ie(r)?r(n):r,a);return{control:{register:Re,unregister:pe,getFieldState:ze,handleSubmit:Qe,setError:Ke,_executeSchema:U,_getWatch:x,_getDirty:F,_updateValid:L,_removeUnmounted:me,_updateFieldArray:m,_updateDisabledField:Ge,_getFieldArray:R,_reset:Xe,_resetDefaultValues:()=>ie(s.defaultValues)&&s.defaultValues().then(r=>{Ye(r,s.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:Tt,_subjects:v,_proxyFormState:_,_setErrors:K,get _fields(){return l},get _formValues(){return n},get _state(){return f},set _state(r){f=r},get _defaultValues(){return i},get _names(){return g},set _names(r){g=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:fe,register:Re,handleSubmit:Qe,watch:Rt,setValue:W,getValues:$e,reset:Ye,resetField:It,clearErrors:pt,unregister:pe,setError:Ke,setFocus:(r,a={})=>{const u=d(l,r),y=u&&u._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&(c.focus(),a.shouldSelect&&c.select())}},getFieldState:ze}}function vr(e={}){const s=k.useRef(),t=k.useRef(),[l,i]=k.useState({isDirty:!1,isValidating:!1,isLoading:ie(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ie(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...or(e),formState:l});const n=s.current.control;return n._options=e,He({subject:n._subjects.state,next:f=>{xt(f,n._proxyFormState,n._updateFormState,!0)&&i({...n._formState})}}),k.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),k.useEffect(()=>{if(n._proxyFormState.isDirty){const f=n._getDirty();f!==l.isDirty&&n._subjects.state.next({isDirty:f})}},[n,l.isDirty]),k.useEffect(()=>{e.values&&!ae(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,i(f=>({...f}))):n._resetDefaultValues()},[e.values,n]),k.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),k.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),k.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),s.current.formState=mt(l,n),s.current}const hr=Nt(e=>({currentUser:null,setCurrentUser:s=>e({currentUser:{...s}}),clearCurrentUser:()=>e({currentUser:null}),updateTrigger:0,triggerUpdate:()=>e(s=>({updateTrigger:s.updateTrigger+1}))}));export{gr as C,Ht as F,vt as I,hr as a,Wt as b,zt as c,Ee as d,Zt as e,$t as f,d as g,vr as u};
