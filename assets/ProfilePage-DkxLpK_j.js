var Re=e=>{throw TypeError(e)};var ae=(e,t,s)=>t.has(e)||Re("Cannot "+s);var a=(e,t,s)=>(ae(e,t,"read from private field"),s?s.call(e):t.get(e)),E=(e,t,s)=>t.has(e)?Re("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),x=(e,t,s,r)=>(ae(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),j=(e,t,s)=>(ae(e,t,"access private method"),s);import{K as et,M as tt,r as y,N as st,s as rt,j as i,q as N,h as at,f as ye,t as it,p as xe,e as ee,k as nt,l as ot,o as Te,O as lt,Q as ct,y as Ne,U as Pe,V as ut,W as Qe,X as De,Y as ht,Z as dt,$ as F,a0 as le,a1 as Y,a2 as ft,a3 as Ee,a4 as Oe,a5 as mt,a6 as pt,a7 as bt,a8 as Ie,a9 as Me,aa as Be,b as te,T as J,B as gt}from"./index-q1dgXiPT.js";import{s as vt,d as Ce,u as yt,c as xt,a as ie,b as Ct,o as St,F as ne}from"./delay-CboN1nMT.js";import{a as We,u as jt,F as G,b as X,I as oe,C as kt}from"./userStore-B6Pn90Sr.js";import{V as Se}from"./chunk-NTCQBYKE-CdmoLKEz.js";import{T as Rt}from"./chunk-4IH3O7BJ-Dxe-ioJV.js";import{H as we}from"./chunk-7OLJDQMT-Dh6BHxHF.js";function Et(e){const{theme:t}=et(),s=tt();return y.useMemo(()=>st(t.direction,{...s,...e}),[e,t.direction,s])}var[Ot,It]=rt({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function wt(e){var t;const s=e.split(" "),r=(t=s[0])!=null?t:"",n=s.length>1?s[s.length-1]:"";return r&&n?`${r.charAt(0)}${n.charAt(0)}`:r.charAt(0)}function ze(e){const{name:t,getInitials:s,...r}=e,n=It();return i.jsx(N.div,{role:"img","aria-label":t,...r,__css:n.label,children:t?s==null?void 0:s(t):null})}ze.displayName="AvatarName";var Ve=e=>i.jsxs(N.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[i.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),i.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]});function Lt(e){const{loading:t,src:s,srcSet:r,onLoad:n,onError:o,crossOrigin:l,sizes:u,ignoreFallback:p}=e,[h,b]=y.useState("pending");y.useEffect(()=>{b(s?"loading":"pending")},[s]);const c=y.useRef(),d=y.useCallback(()=>{if(!s)return;f();const v=new Image;v.src=s,l&&(v.crossOrigin=l),r&&(v.srcset=r),u&&(v.sizes=u),t&&(v.loading=t),v.onload=S=>{f(),b("loaded"),n==null||n(S)},v.onerror=S=>{f(),b("failed"),o==null||o(S)},c.current=v},[s,l,r,u,n,o,t]),f=()=>{c.current&&(c.current.onload=null,c.current.onerror=null,c.current=null)};return at(()=>{if(!p)return h==="loading"&&d(),()=>{f()}},[h,d,p]),p?"loaded":h}function $e(e){const{src:t,srcSet:s,onError:r,onLoad:n,getInitials:o,name:l,borderRadius:u,loading:p,iconLabel:h,icon:b=i.jsx(Ve,{}),ignoreFallback:c,referrerPolicy:d,crossOrigin:f}=e,S=Lt({src:t,onError:r,crossOrigin:f,ignoreFallback:c})==="loaded";return!t||!S?l?i.jsx(ze,{className:"chakra-avatar__initials",getInitials:o,name:l}):y.cloneElement(b,{role:"img","aria-label":h}):i.jsx(N.img,{src:t,srcSet:s,alt:l,onLoad:n,referrerPolicy:d,crossOrigin:f??void 0,className:"chakra-avatar__img",loading:p,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:u}})}$e.displayName="AvatarImage";var _t={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},He=ye((e,t)=>{const s=it("Avatar",e),[r,n]=y.useState(!1),{src:o,srcSet:l,name:u,showBorder:p,borderRadius:h="full",onError:b,onLoad:c,getInitials:d=wt,icon:f=i.jsx(Ve,{}),iconLabel:v=" avatar",loading:S,children:C,borderColor:I,ignoreFallback:R,crossOrigin:k,referrerPolicy:U,...A}=xe(e),se={borderRadius:h,borderWidth:p?"2px":void 0,..._t,...s.container};return I&&(se.borderColor=I),i.jsx(N.span,{ref:t,...A,className:ee("chakra-avatar",e.className),"data-loaded":nt(r),__css:se,children:i.jsxs(Ot,{value:s,children:[i.jsx($e,{src:o,srcSet:l,loading:S,onLoad:ot(c,()=>{n(!0)}),onError:b,getInitials:d,name:u,borderRadius:h,icon:f,iconLabel:v,ignoreFallback:R,crossOrigin:k,referrerPolicy:U}),C]})})});He.displayName="Avatar";var Ke=ye(function(t,s){const{borderLeftWidth:r,borderBottomWidth:n,borderTopWidth:o,borderRightWidth:l,borderWidth:u,borderStyle:p,borderColor:h,...b}=Te("Divider",t),{className:c,orientation:d="horizontal",__css:f,...v}=xe(t),S={vertical:{borderLeftWidth:r||l||u||"1px",height:"100%"},horizontal:{borderBottomWidth:n||o||u||"1px",width:"100%"}};return i.jsx(N.hr,{ref:s,"aria-orientation":d,...v,__css:{...b,border:"0",borderColor:h,borderStyle:p,...S[d],...f},className:ee("chakra-divider",c)})});Ke.displayName="Divider";function Ft(e,t={}){const{ssr:s=!0,fallback:r}=t,{getWindow:n}=lt(),o=Array.isArray(e)?e:[e];let l=Array.isArray(r)?r:[r];l=l.filter(h=>h!=null);const[u,p]=y.useState(()=>o.map((h,b)=>({media:h,matches:s?!!l[b]:n().matchMedia(h).matches})));return y.useEffect(()=>{const h=n();p(o.map(d=>({media:d,matches:h.matchMedia(d).matches})));const b=o.map(d=>h.matchMedia(d)),c=d=>{p(f=>f.slice().map(v=>v.media===d.media?{...v,matches:d.matches}:v))};return b.forEach(d=>{typeof d.addListener=="function"?d.addListener(c):d.addEventListener("change",c)}),()=>{b.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(c):d.removeEventListener("change",c)})}},[n]),u.map(h=>h.matches)}function Ut(e,t,s=ct){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let n=s.indexOf(t);for(;n>=0;){const o=s[n];if(e.hasOwnProperty(o)){r=n;break}n-=1}if(r!==-1){const o=s[r];return e[o]}}function At(e){var t,s;const r=Pe(e)?e:{fallback:e??"base"},o=Ne().__breakpoints.details.map(({minMaxQuery:h,breakpoint:b})=>({breakpoint:b,query:h.replace("@media screen and ","")})),l=o.map(h=>h.breakpoint===r.fallback),p=Ft(o.map(h=>h.query),{fallback:l,ssr:r.ssr}).findIndex(h=>h==!0);return(s=(t=o[p])==null?void 0:t.breakpoint)!=null?s:r.fallback}function Tt(e,t){var s;const r=Pe(t)?t:{fallback:"base"},n=At(r),o=Ne();if(!n)return;const l=Array.from(((s=o.__breakpoints)==null?void 0:s.keys)||[]),u=Array.isArray(e)?Object.fromEntries(Object.entries(ut(e,l)).map(([p,h])=>[p,h])):e;return Ut(u,n,l)}function Nt(){const e=y.useRef(!0);return y.useEffect(()=>{e.current=!1},[]),e.current}function Pt(e){const t=y.useRef();return y.useEffect(()=>{t.current=e},[e]),t.current}var Qt=N("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),ce=Qe("skeleton-start-color"),ue=Qe("skeleton-end-color"),Dt=De({from:{opacity:0},to:{opacity:1}}),Mt=De({from:{borderColor:ce.reference,background:ce.reference},to:{borderColor:ue.reference,background:ue.reference}}),P=ye((e,t)=>{const s={...e,fadeDuration:typeof e.fadeDuration=="number"?e.fadeDuration:.4,speed:typeof e.speed=="number"?e.speed:.8},r=Te("Skeleton",s),n=Nt(),{startColor:o="",endColor:l="",isLoaded:u,fadeDuration:p,speed:h,className:b,fitContent:c,...d}=xe(s),[f,v]=ht("colors",[o,l]),S=Pt(u),C=ee("chakra-skeleton",b),I={...f&&{[ce.variable]:f},...v&&{[ue.variable]:v}};if(u){const R=n||S?"none":`${Dt} ${p}s`;return i.jsx(N.div,{ref:t,className:C,__css:{animation:R},...d})}return i.jsx(Qt,{ref:t,className:C,...d,__css:{width:c?"fit-content":void 0,...r,...I,_dark:{...r._dark,...I},animation:`${h}s linear infinite alternate ${Mt}`}})});P.displayName="Skeleton";var qe=({size:e="2rem",...t})=>i.jsx(P,{borderRadius:"full",boxSize:e,...t});qe.displayName="SkeletonCircle";function Bt(e){return Array(e).fill(1).map((t,s)=>s+1)}var Le=3,Ze=e=>{const{noOfLines:t=Le,spacing:s="0.5rem",skeletonHeight:r="0.5rem",className:n,startColor:o,endColor:l,isLoaded:u,fadeDuration:p,speed:h,variant:b,size:c,colorScheme:d,children:f,...v}=e,S=Tt(typeof t=="number"?[t]:t)||Le,C=Bt(S),I=k=>S>1&&k===C.length?"80%":"100%",R=ee("chakra-skeleton__group",n);return i.jsx(N.div,{className:R,...v,children:C.map((k,U)=>{if(u&&U>0)return null;const A=u?null:{mb:k===C.length?"0":s,width:I(k),height:r};return i.jsx(P,{startColor:o,endColor:l,isLoaded:u,fadeDuration:p,speed:h,variant:b,size:c,colorScheme:d,...A,children:U===0?f:void 0},C.length.toString()+k)})})};Ze.displayName="SkeletonText";var w,m,q,O,Q,z,_,Z,V,$,D,M,T,H,g,K,he,de,fe,me,pe,be,ge,Ge,Ae,Wt=(Ae=class extends dt{constructor(t,s){super();E(this,g);E(this,w);E(this,m);E(this,q);E(this,O);E(this,Q);E(this,z);E(this,_);E(this,Z);E(this,V);E(this,$);E(this,D);E(this,M);E(this,T);E(this,H,new Set);this.options=s,x(this,w,t),x(this,_,null),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,m).addObserver(this),_e(a(this,m),this.options)?j(this,g,K).call(this):this.updateResult(),j(this,g,me).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ve(a(this,m),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ve(a(this,m),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,j(this,g,pe).call(this),j(this,g,be).call(this),a(this,m).removeObserver(this)}setOptions(t,s){const r=this.options,n=a(this,m);if(this.options=a(this,w).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof F(this.options.enabled,a(this,m))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");j(this,g,ge).call(this),a(this,m).setOptions(this.options),r._defaulted&&!le(this.options,r)&&a(this,w).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,m),observer:this});const o=this.hasListeners();o&&Fe(a(this,m),n,this.options,r)&&j(this,g,K).call(this),this.updateResult(s),o&&(a(this,m)!==n||F(this.options.enabled,a(this,m))!==F(r.enabled,a(this,m))||Y(this.options.staleTime,a(this,m))!==Y(r.staleTime,a(this,m)))&&j(this,g,he).call(this);const l=j(this,g,de).call(this);o&&(a(this,m)!==n||F(this.options.enabled,a(this,m))!==F(r.enabled,a(this,m))||l!==a(this,T))&&j(this,g,fe).call(this,l)}getOptimisticResult(t){const s=a(this,w).getQueryCache().build(a(this,w),t),r=this.createResult(s,t);return Vt(this,r)&&(x(this,O,r),x(this,z,this.options),x(this,Q,a(this,m).state)),r}getCurrentResult(){return a(this,O)}trackResult(t,s){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s==null||s(n),t[n])})}),r}trackProp(t){a(this,H).add(t)}getCurrentQuery(){return a(this,m)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=a(this,w).defaultQueryOptions(t),r=a(this,w).getQueryCache().build(a(this,w),s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(t){return j(this,g,K).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,O)))}createResult(t,s){var ke;const r=a(this,m),n=this.options,o=a(this,O),l=a(this,Q),u=a(this,z),h=t!==r?t.state:a(this,q),{state:b}=t;let c={...b},d=!1,f;if(s._optimisticResults){const L=this.hasListeners(),re=!L&&_e(t,s),Je=L&&Fe(t,r,s,n);(re||Je)&&(c={...c,...bt(b.data,t.options)}),s._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:v,errorUpdatedAt:S,status:C}=c;if(s.select&&c.data!==void 0)if(o&&c.data===(l==null?void 0:l.data)&&s.select===a(this,Z))f=a(this,V);else try{x(this,Z,s.select),f=s.select(c.data),f=Ie(o==null?void 0:o.data,f,s),x(this,V,f),x(this,_,null)}catch(L){x(this,_,L)}else f=c.data;if(s.placeholderData!==void 0&&f===void 0&&C==="pending"){let L;if(o!=null&&o.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))L=o.data;else if(L=typeof s.placeholderData=="function"?s.placeholderData((ke=a(this,$))==null?void 0:ke.state.data,a(this,$)):s.placeholderData,s.select&&L!==void 0)try{L=s.select(L),x(this,_,null)}catch(re){x(this,_,re)}L!==void 0&&(C="success",f=Ie(o==null?void 0:o.data,L,s),d=!0)}a(this,_)&&(v=a(this,_),f=a(this,V),S=Date.now(),C="error");const I=c.fetchStatus==="fetching",R=C==="pending",k=C==="error",U=R&&I,A=f!==void 0;return{status:C,fetchStatus:c.fetchStatus,isPending:R,isSuccess:C==="success",isError:k,isInitialLoading:U,isLoading:U,data:f,dataUpdatedAt:c.dataUpdatedAt,error:v,errorUpdatedAt:S,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>h.dataUpdateCount||c.errorUpdateCount>h.errorUpdateCount,isFetching:I,isRefetching:I&&!R,isLoadingError:k&&!A,isPaused:c.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:k&&A,isStale:je(t,s),refetch:this.refetch}}updateResult(t){const s=a(this,O),r=this.createResult(a(this,m),this.options);if(x(this,Q,a(this,m).state),x(this,z,this.options),a(this,Q).data!==void 0&&x(this,$,a(this,m)),le(r,s))return;x(this,O,r);const n={},o=()=>{if(!s)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!a(this,H).size)return!0;const p=new Set(u??a(this,H));return this.options.throwOnError&&p.add("error"),Object.keys(a(this,O)).some(h=>{const b=h;return a(this,O)[b]!==s[b]&&p.has(b)})};(t==null?void 0:t.listeners)!==!1&&o()&&(n.listeners=!0),j(this,g,Ge).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&j(this,g,me).call(this)}},w=new WeakMap,m=new WeakMap,q=new WeakMap,O=new WeakMap,Q=new WeakMap,z=new WeakMap,_=new WeakMap,Z=new WeakMap,V=new WeakMap,$=new WeakMap,D=new WeakMap,M=new WeakMap,T=new WeakMap,H=new WeakMap,g=new WeakSet,K=function(t){j(this,g,ge).call(this);let s=a(this,m).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(ft)),s},he=function(){j(this,g,pe).call(this);const t=Y(this.options.staleTime,a(this,m));if(Ee||a(this,O).isStale||!Oe(t))return;const r=mt(a(this,O).dataUpdatedAt,t)+1;x(this,D,setTimeout(()=>{a(this,O).isStale||this.updateResult()},r))},de=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,m)):this.options.refetchInterval)??!1},fe=function(t){j(this,g,be).call(this),x(this,T,t),!(Ee||F(this.options.enabled,a(this,m))===!1||!Oe(a(this,T))||a(this,T)===0)&&x(this,M,setInterval(()=>{(this.options.refetchIntervalInBackground||pt.isFocused())&&j(this,g,K).call(this)},a(this,T)))},me=function(){j(this,g,he).call(this),j(this,g,fe).call(this,j(this,g,de).call(this))},pe=function(){a(this,D)&&(clearTimeout(a(this,D)),x(this,D,void 0))},be=function(){a(this,M)&&(clearInterval(a(this,M)),x(this,M,void 0))},ge=function(){const t=a(this,w).getQueryCache().build(a(this,w),this.options);if(t===a(this,m))return;const s=a(this,m);x(this,m,t),x(this,q,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Ge=function(t){Me.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(a(this,O))}),a(this,w).getQueryCache().notify({query:a(this,m),type:"observerResultsUpdated"})})},Ae);function zt(e,t){return F(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function _e(e,t){return zt(e,t)||e.state.data!==void 0&&ve(e,t,t.refetchOnMount)}function ve(e,t,s){if(F(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&je(e,t)}return!1}function Fe(e,t,s,r){return(e!==t||F(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&je(e,s)}function je(e,t){return F(t.enabled,e)!==!1&&e.isStaleByTime(Y(t.staleTime,e))}function Vt(e,t){return!le(e.getCurrentResult(),t)}var Xe=y.createContext(!1),$t=()=>y.useContext(Xe);Xe.Provider;function Ht(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Kt=y.createContext(Ht()),qt=()=>y.useContext(Kt),Zt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Gt=e=>{y.useEffect(()=>{e.clearReset()},[e])},Xt=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&vt(s,[e.error,r]),Yt=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},Jt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,es=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ts(e,t,s){var h,b,c,d;const r=Be(),n=$t(),o=qt(),l=r.defaultQueryOptions(e);(b=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||b.call(h,l),l._optimisticResults=n?"isRestoring":"optimistic",Yt(l),Zt(l,o),Gt(o);const[u]=y.useState(()=>new t(r,l)),p=u.getOptimisticResult(l);if(y.useSyncExternalStore(y.useCallback(f=>{const v=n?()=>{}:u.subscribe(Me.batchCalls(f));return u.updateResult(),v},[u,n]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),y.useEffect(()=>{u.setOptions(l,{listeners:!1})},[l,u]),Jt(l,p))throw es(l,u,o);if(Xt({result:p,errorResetBoundary:o,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw p.error;return(d=(c=r.getDefaultOptions().queries)==null?void 0:c._experimental_afterQuery)==null||d.call(c,l,p),l.notifyOnChangeProps?p:u.trackResult(p)}function ss(e,t){return ts(e,Wt)}const B=[{id:"1",username:"user1",email:"user1@example.com",bio:"I am user 1"},{id:"2",username:"user2",email:"user2@example.com",bio:"I am user 2"}],rs=async({userId:e})=>{await Ce(500);const t=B.find(s=>s.id===e);if(!t)throw new Error("User not found");return{...t}},as=async e=>{await Ce(500);const t=B.findIndex(r=>r.id===e.userId);if(t===-1)throw new Error("User not found");const s={...B[t],...e,avatar:e.avatar?URL.createObjectURL(e.avatar):B[t].avatar};return B[t]=s,{...s}},is=async()=>(await Ce(500),{...B[0]}),Ye=e=>{const{updateTrigger:t}=We();return ss({queryKey:e?["/api/users",e.userId]:["/api/users/me",t],queryFn:e?()=>rs(e):is})},ns=({username:e,avatar:t,email:s,bio:r})=>i.jsx(te,{children:i.jsxs(Se,{spacing:4,align:"center",children:[i.jsx(He,{size:"2xl",name:e,src:t}),i.jsx(J,{fontSize:"2xl",fontWeight:"bold",children:e}),i.jsx(J,{children:s}),i.jsx(J,{children:r||""})]})}),os=({userId:e})=>{const{data:t,error:s,isError:r,isLoading:n}=Ye(e?{userId:e}:void 0);return n?i.jsxs(te,{padding:"6",boxShadow:"lg",bg:"white",children:[i.jsx(qe,{size:"10"}),i.jsx(Ze,{mt:"4",noOfLines:4,spacing:"4"})]}):r?i.jsxs(J,{color:"red.500",children:["Error: ",s.message]}):t?i.jsx(ns,{...t}):null},W={all:["users"],lists:()=>[...W.all,"list"],list:e=>[...W.lists(),{filters:e}],details:()=>[...W.all,"detail"],detail:e=>[...W.details(),e]},ls=()=>{const e=Be();return yt({mutationFn:async t=>await as(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:W.detail(s.userId)}),e.invalidateQueries({queryKey:W.detail("me")})}})},Ue=500,cs=2*1024*1024,us=xt().shape({username:ie().required("Username is required"),email:ie().email("Invalid email address").required("Email is required"),bio:ie().max(Ue,`Bio must be ${Ue} characters or less`).optional(),avatar:Ct().test("fileSize","File is too large",e=>e&&e instanceof File?e.size<=cs:!0).optional()}),hs=()=>{var S,C,I;const{data:e,isLoading:t}=Ye(),s=ls(),{register:r,handleSubmit:n,reset:o,control:l,formState:{errors:u,isSubmitting:p}}=jt({resolver:St(us)}),{setCurrentUser:h,triggerUpdate:b}=We(),c=Et();y.useEffect(()=>{e&&o(e)},[e,o]);const d=y.useCallback(async R=>{try{if(!(e!=null&&e.id))return;const k=await s.mutateAsync({...R,userId:e.id});h(k),b(),c({title:"Profile updated successfully",status:"success",duration:3e3,isClosable:!0})}catch(k){c({title:"Failed to update profile",description:k instanceof Error?k.message:"An unknown error occurred",status:"error",duration:3e3,isClosable:!0})}},[e==null?void 0:e.id,s,h,b,c]),f=y.useCallback(R=>k=>{var A;const U=(A=k.target.files)==null?void 0:A[0];R.onChange(U)},[]),v=y.useCallback(R=>{R.currentTarget.value=""},[]);return i.jsx(te,{as:"form",onSubmit:n(d),children:i.jsxs(Se,{spacing:4,children:[i.jsxs(G,{isInvalid:!!u.username,children:[i.jsx(X,{children:"Username"}),t?i.jsx(P,{height:"40px"}):i.jsx(oe,{...r("username")}),i.jsx(ne,{children:(S=u.username)==null?void 0:S.message})]}),i.jsxs(G,{isInvalid:!!u.email,children:[i.jsx(X,{children:"Email"}),t?i.jsx(P,{height:"40px"}):i.jsx(oe,{...r("email")}),i.jsx(ne,{children:(C=u.email)==null?void 0:C.message})]}),i.jsxs(G,{isInvalid:!!u.bio,children:[i.jsx(X,{children:"Bio"}),t?i.jsx(P,{height:"80px"}):i.jsx(Rt,{...r("bio")}),i.jsx(ne,{children:(I=u.bio)==null?void 0:I.message})]}),i.jsxs(G,{children:[i.jsx(X,{children:"Avatar"}),i.jsx(kt,{name:"avatar",control:l,render:({field:R})=>t?i.jsx(P,{height:"40px"}):i.jsx(oe,{type:"file",accept:"image/*",onChange:f(R),onClick:v})})]}),i.jsx(gt,{type:"submit",colorScheme:"blue",isLoading:p||t,children:"Update Profile"})]})})},ys=()=>i.jsx(te,{maxWidth:"600px",margin:"auto",padding:8,children:i.jsxs(Se,{spacing:8,align:"stretch",children:[i.jsx(we,{as:"h1",size:"xl",textAlign:"center",children:"ユーザープロフィール"}),i.jsx(os,{}),i.jsx(Ke,{}),i.jsx(we,{as:"h2",size:"lg",children:"プロフィール編集"}),i.jsx(hs,{})]})});export{ys as ProfilePage};
